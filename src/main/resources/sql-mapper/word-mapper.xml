<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.an9elkiss.api.eling.dao.WordDao">
	
	<select id="findByScene"  resultType = "com.an9elkiss.api.eling.model.Word" >
		SELECT w.*
		FROM t_word w, t_scene s, t_scene_word sw
		WHERE w.id = sw.word_id
		AND sw.scene_id = s.id
		AND s.scene = #{scene}
	</select>
	
	<select id="findTags"  resultType = "com.an9elkiss.api.eling.command.WordTagCmd" >
		SELECT wt.*,t.tag
		FROM t_tag t, t_word_tag wt
		WHERE wt.tag_id = t.id
		AND wt.word_id IN (
			<foreach collection="wordIds" item="wordId" index="index" separator="," >  
                #{wordId} 
            </foreach>
		);
	</select>
	
</mapper>